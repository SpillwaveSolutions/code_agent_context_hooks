{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "CCH Binary Response",
  "description": "JSON schema for CCH Binary responses to Claude Code",
  "type": "object",
  "required": ["continue"],
  "properties": {
    "continue": {
      "type": "boolean",
      "description": "Whether the operation should proceed (true) or be blocked (false)"
    },
    "context": {
      "type": "string",
      "description": "Additional context to inject into Claude's session",
      "maxLength": 1048576,
      "examples": ["# AWS CDK Context\n\nUse CDK v2 constructs for..."]
    },
    "reason": {
      "type": "string",
      "description": "Explanation for blocking the operation or injecting context",
      "examples": [
        "Blocked: git push --force detected",
        "Injected CDK context for file changes in cdk/ directory"
      ]
    },
    "timing": {
      "type": "object",
      "description": "Performance metrics for this request",
      "properties": {
        "processing_ms": {
          "type": "number",
          "minimum": 0,
          "description": "Total processing time in milliseconds",
          "examples": [2.5, 0.8]
        },
        "rules_evaluated": {
          "type": "integer",
          "minimum": 0,
          "description": "Number of rules that were evaluated",
          "examples": [5, 12]
        },
        "rules_matched": {
          "type": "integer",
          "minimum": 0,
          "description": "Number of rules that matched this event",
          "examples": [1, 3]
        }
      },
      "additionalProperties": false
    },
    "metadata": {
      "type": "object",
      "description": "Additional response metadata",
      "properties": {
        "injected_files": {
          "type": "array",
          "items": { "type": "string" },
          "description": "List of files injected as context",
          "examples": [[".claude/skills/aws-cdk/SKILL.md"]]
        },
        "validator_results": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "script": { "type": "string" },
              "exit_code": { "type": "integer" },
              "output": { "type": "string" },
              "execution_time_ms": { "type": "number" }
            },
            "additionalProperties": false
          },
          "description": "Results from validator script executions"
        }
      },
      "additionalProperties": false
    }
  },
  "dependencies": {
    "reason": {
      "oneOf": [
        { "properties": { "continue": { "enum": [false] } } },
        { "properties": { "context": { "type": "string" } } }
      ]
    }
  },
  "additionalProperties": false
}